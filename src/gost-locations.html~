<link rel="import" href="./bower_components/polymer/polymer.html">
<link rel="import" href="./bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="./bower_components/iron-swipeable-container/iron-swipeable-container.html">
<link rel="import" href="./bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="./bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="./bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html">
<link rel="import" href="./bower_components/paper-item/paper-item.html">
<link rel="import" href="./bower_components/paper-card/paper-card.html">
<link rel="import" href="./bower_components/paper-button/paper-button.html">
<link rel="import" href="./bower_components/paper-fab/paper-fab.html">
<link rel="import" href="./bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="./bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="./bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="./bower_components/iron-icons/maps-icons.html">
<link rel="import" href="./bower_components/iron-selector/iron-selector.html">
<link rel="import" href="./bower_components/iron-pages/iron-pages.html">
<link rel="import" href="./bower_components/iron-ajax/iron-ajax.html">

<link rel="import" href="./bower_components/neon-animation/neon-animation.html">
<link rel="import" href="./bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="./bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="./bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="./bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="./bower_components/paper-item/paper-item.html">
<link rel="import" href="./bower_components/paper-item/paper-item-body.html">
<link rel="import" href="./bower_components/paper-item/paper-icon-item.html">
<link rel="import" href="./bower_components/paper-card/paper-card.html">
<link rel="import" href="./bower_components/paper-material/paper-material.html">
<link rel="import" href="./bower_components/paper-toast/paper-toast.html">
<link rel="import" href="./bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="./bower_components/paper-header-panel/paper-header-panel.html">

<dom-module id="gost-locations">
    <template>
    <style include="iron-flex iron-flex-alignment"></style>

    <iron-ajax auto id='locationsrequest'
        url='[[locationsurl]]'
        handle-as="json"
        last-response={{locationsarray}}
    ></iron-ajax>
    <!-- TODO: List page and detail page -->
        <table>
            <tr>
            <th>ID</th>
            <th>Description</th>
            <th>Encoding</th>
            <th>Location</th>
            </tr>
        <template is="dom-repeat" items=[[locationsarray.value]]>
            <tr>
            <td>[[getid(item)]]</td>
            <td>[[item.description]]</td>
            <td>[[item.encodingType]]</td>
            <td>[[stringify(item.location)]]</td>
            </tr>
        </template>
        </table>
    </template>
</dom-module>

<script>

Polymer({
    is: 'gost-things',
    properties: {
        things: {
            type: Array
        },
        thingsurl: {
            type: String,
            value: 'http://gost.geodan.nl/v1.0/Locations'
        }
    },
    ready: function(){

    },
    stringify:function(data){
        return JSON.stringify(data);
    },
    getid: function(item){
    	return item['@iot.id'];
    }

});
</script>
